Type: AWS::DynamoDB::Table
Properties:
  TableName: Inbox
  AttributeDefinitions:
    - AttributeName: _author
      AttributeType: S
    # - AttributeName: ${{self:custom.props.seq}}
    #   AttributeType: N
    - AttributeName: _link
      AttributeType: S
    - AttributeName: time
      AttributeType: N
  KeySchema:
    - AttributeName: _author
      KeyType: HASH
    - AttributeName: time
      KeyType: RANGE
    # - AttributeName: seq
    #   KeyType: RANGE
  ProvisionedThroughput:
    ReadCapacityUnits: 5
    WriteCapacityUnits: 5
  StreamSpecification:
    StreamViewType: NEW_AND_OLD_IMAGES
  GlobalSecondaryIndexes:
    - IndexName: _link
      KeySchema:
        - AttributeName: _link
          KeyType: HASH
      Projection:
        ProjectionType: ALL
      ProvisionedThroughput:
        ReadCapacityUnits: 5
        WriteCapacityUnits: 5
